## Secruity Vulnerability Items

#### Contents
* [Prologue](#prologue) 
* [Business Resources](#business-resources) 
* [Author](#author)
* [Research Standards](#research-standards)
* [Findings vs. Feedback](#findings-vs-feedback)
    * [Report Item 3699](#report-item-3699)
    * [Report Item 3701](#report-item-3701)
    * [Report Item 3702](#report-item-3702)
    * [Report Item 3703](#report-item-3703)
    * [Report Item 3704](#report-item-3704)
      
      
#### Prologue
In July '20, GE Digital (Predix) was retained to conduct an internal evaluation over the current production agent (v1) and service (1.0). The evaluation was mainly focused on the network security practice up to HTTP level. EC @R&D had put up an action plan and executing it accordingly. The detail is as follows.

#### Business Resources
- [Project board](https://github.com/EC-Release/sdk/projects/18)
- [The codebase](https://gitlab.com/digital-fo/connectivity/enterprise-connect/platform-agnostic/agent/-/tree/v1_sourcecode_update_pentest)
- [Original Draft (Internal)](https://ge.ent.box.com/file/694822011858)
- [Stakeholders](https://github.com/orgs/Enterprise-connect/teams/ec-stakeholders)

#### Author
 - [Research & Develoment @EC](https://github.com/orgs/EC-Release/teams/research-development)

#### Research Standards
 - [HTTP/1.1 (RFC-2616)](https://tools.ietf.org/html/rfc2616)
 - [HTTP Message Syntax and Routing (RFC-7230)](https://tools.ietf.org/html/rfc7230)

#### Findings vs. Feedback
##### Report Item [3699](https://github.com/EC-Release/sdk/issues/125)
  - The vulnerability on EC configruation during the HTTP call is acknowledged. We are proposing an encryption library ([code snippet](https://gitlab.com/digital-fo/connectivity/enterprise-connect/platform-agnostic/agent/-/blob/v1_sourcecode_update_pentest/pentest.go#L10)) as part of new cipher procedure during the call.
  - Upon an internal review, the security library will be intruduced in the next agent release (v1.hokkaido.213)

[Back to Contents](#contents)

##### Report Item [3701](https://github.com/EC-Release/sdk/issues/123)

   This vulnerability describes about restrict accessing agent health with authentication mechanism and with SSL. In order to avoid the vulnerability -
   - Health page should be accessible only after authentication via bearer token or admin token or admin secret.
   - EC should has inbuilt certificate mechanism to generate and verification

[Back to Contents](#contents)

##### Report Item [3702](https://github.com/EC-Release/sdk/issues/122)

   - This vulnerability describes the EC service API response though agent sending wrong token or random string not encrypted with public key for validation
   - End point should throw **401 Unauthorized** if decryption fails

[Back to Contents](#contents)

##### Report Item [3703](https://github.com/EC-Release/sdk/issues/124)

  - This vulenrability states about the usage of file transfer flags in EC client, it suggests that this functionality may lead into getting access of file system on which EC server is running.
  - In order to avoid this vulnerability, it is recommended in the report to have more granular access control mechanism for file transfer operation using UAA scopes
  - The EC server side file system access should be limited by providing access to specific directory only with minimum user previledge ([code snippet](https://gitlab.com/digital-fo/connectivity/enterprise-connect/platform-agnostic/agent/-/blob/v1_sourcecode/wzlib/wzcore/client.go))
  - To simplify the usage in a context of a Predix environment, we are working to **disable the FT feature and/or its subsidiary feature(s)** to mitigate the vulnerability. However, we may contemplate a plan to publish a similar solution in future non-Predix release(s).

[Back to Contents](#contents)

##### Report Item [3704](https://github.com/EC-Release/sdk/issues/121)

  - The item found the usage of the loopback address vulnerable to an attack[1]. It also suggests that it is impractical to volunteerily trust any given proxy service[2].
  - [1]A request acceptance over a loopback address was designed for local test purpose. Propose to remove the exception in the current ipfiltering flow([code snippet](https://gitlab.com/digital-fo/connectivity/enterprise-connect/platform-agnostic/agent/-/blob/v1_sourcecode_update_pentest/wzlib/wzutil/ipfilter.go#L48)). A tester will then be required whitelist the loopback address at the gateway setting. This is a minimum business-impact item.
  - [2]In the suggestion of limiting the range of the proxy service, we found such limitation may discourage the service adoption, and further impose a maximum business impact due to an unknown httpproxy service setting applied to existing usage. Propose to add a custom flag(s) to restrict an acceptable range of proxy usage in the gateway setting.

[Back to Contents](#contents)

<sup>draft ver: [v1.hokkaido.212.security.0](https://github.com/EC-Release/sdk/releases/tag/v1.hokkaido.212.security.0)</sup>
